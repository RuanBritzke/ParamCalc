#:kivy 2.1.0
##############################################################################
<WindowManager>:
    canvas:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size

    MainWindow:
    Calculadora:

##############################################################################

<MainWindow>:
    name: 'main'
    canvas:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size
    BoxLayout:
        orientation: 'vertical'

        Label:
            text: ""
            size_hint: 1, 0.1
        Button:
            text: 'Selecionar Fabricante do Regulador'
            size_hint: 0.9, 1
            pos_hint: {"center_x": 0.5}
            on_release:
                root.listar_fabricantes()
        Label:
            id: 'label_fabricante'
            color: 0, 0, 0, 1
            text: root.label_fabricante
        Label:
            text: ""
        Button:
            text: 'Calculadora'
            size_hint: 0.9, 1
            pos_hint: {"center_x": 0.5}
            on_release:
                app.root.transition.direction = 'left'
                app.root.current = self.text
        Label:
            text: ''
        Image: 
            source: r'img\Celesc.png'
            size: self.texture_size
##############################################################################

<Calculadora>:
    name: 'Calculadora'
    canvas:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: 'vertical'
        size_hint: 0.95, 0.95
        pos_hint: {"center_x": 0.5, "center_y": 0.5}

        GridLayout:
            cols: 2
            size_hint: 1, 0.09
            ToggleButton:
                id: trifasico
                text: 'Trifásico'
                group: 'fases'
                state: 'normal'
                    
            ToggleButton:
                id: monofasico
                text: 'Monofásico'
                group: 'fases'
                state: 'down'

        GridLayout:
            size_hint: 1, 0.9
            cols: 2
            BoxLayout:
                orientation: 'vertical'
                size_hint: 0.23, 1
                Label:
                    color: 0, 0, 0, 1
                    text_size: self.size
                    text: 'Potência Aparente:'
                    max_lines: 2
                    pos_hint: {"rigth":.2}
                    valign: 'middle'
                    
                Label:
                    color: 0, 0, 0, 1
                    text_size: self.size
                    text: 'Potência Ativa:'
                    max_lines: 2
                    pos_hint: {"rigth":.2}
                    valign: 'middle'

                Label:
                    color: 0, 0, 0, 1
                    text_size: self.size
                    text: 'Potência Reativa:'
                    max_lines: 2
                    valign: 'middle'
                    halign: 'left'
                Label:
                    color: 0, 0, 0, 1
                    text_size: self.size
                    text: '\u03C6:'
                    max_lines: 1
                    valign: 'middle'
                    halign: 'left'
                Label:
                    color: 0, 0, 0, 1
                    text_size: self.size
                    text: 'Fator de Potência:'
                    max_lines: 2
                    valign: 'middle'
                    halign: 'left'
                Label:
                    color: 0, 0, 0, 1
                    text_size: self.size
                    text: 'Tensão:'
                    max_lines: 1
                    valign: 'middle'
                    halign: 'left'
                Label:
                    color: 0, 0, 0, 1
                    text_size: self.size
                    text: 'Corrente:'
                    max_lines: 1
                    valign: 'middle'
                    halign: 'left'


            BoxLayout:
                orientation: 'vertical'
                TextInput: 
                    id: potencia_aparente
                    text: root.S
                    input_filter: 'float'
                    multiline: False
                TextInput:
                    id: potencia_ativa
                    text: root.P
                    input_filter: 'float'
                    multiline: False

                TextInput:
                    id: potencia_reativa
                    text: root.Q
                    input_filter: 'float' 
                    multiline: False 

                TextInput:
                    id: angulo_de_fase
                    text: root.phi
                    input_filter: 'float'
                    multiline: False

                TextInput:
                    id: fator_de_potencia
                    text: root.FP
                    input_filter: 'float' 
                    multiline: False  

                TextInput:
                    id: tensao
                    text: root.V
                    input_filter: 'float'
                    multiline: False

                TextInput:
                    id: corrente
                    text: root.I
                    input_filter: 'float'
                    multiline: False

        GridLayout:
            cols: 2
            size_hint: 1, .09
            pos_hint: {"center_x": 0.5}
            Button:
                text: 'Calcular'
                on_press:
                    root.salva_info()

            Button:
                text: 'Limpar'
                on_press:
                    root.limpar()

        BoxLayout:
            orientation: 'horizontal'
            size_hint: 1, 0.09
            Label:
                text: ""
            Button:
                text: 'Voltar'
                on_release:
                    app.root.transition.direction = 'right'
                    app.root.current = 'main'
##############################################################################